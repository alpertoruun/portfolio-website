---
// Experience Section - Clean timeline with role highlights

const experiences = [
  {
    company: "Getir",
    role: "Platform & Infrastructure Engineer",
    period: "July 2025 - Present",
    location: "Izmir, Turkey (Hybrid)",
    type: "current",
    highlights: [
      {
        title: "CI/CD Migration at Scale",
        description: "Led migration of 4000+ repositories from Bitbucket to GitHub using custom Go/Bash automation tools.",
        metric: "4000+ repos",
        icon: "üîÑ"
      },
      {
        title: "Internal Developer Platform",
        description: "Built 'Kitchen' - the company's central IDP using Backstage, enabling self-service infrastructure provisioning.",
        metric: "Reduced cognitive load",
        icon: "üõ†Ô∏è"
      },
      {
        title: "GitOps & Infrastructure",
        description: "Managed multi-cluster ArgoCD deployments, AWS CDK/Terraform modules, and Atlantis workflows.",
        metric: "Multi-cluster",
        icon: "‚éà"
      },
      {
        title: "Security & Cost Optimization",
        description: "Implemented OpenCost with Athena pipelines for spend tracking and Spot/On-Demand analysis.",
        metric: "Cost visibility",
        icon: "üí∞"
      }
    ],
    technologies: ["GitHub Actions", "ArgoCD", "Backstage", "AWS CDK", "Terraform", "Atlantis", "Go", "Kubernetes"]
  },
  {
    company: "P.I. Works",
    role: "Junior DevOps Engineer",
    period: "March 2025 - July 2025",
    location: "Istanbul, Turkey (Remote)",
    type: "recent",
    highlights: [
      {
        title: "DevOps AI System",
        description: "Built automated code review system using LLMs (Ollama) for GitLab commits, Merge Requests, and failed pipelines with Python Flask backend and RabbitMQ task queuing.",
        metric: "AI-powered reviews",
        icon: "ü§ñ"
      },
      {
        title: "VS Code Extension Development",
        description: "Developed 'DevOps Toolkit' extension integrating interactive chat and automated documentation generation directly within the IDE.",
        metric: "IDE integration",
        icon: "üß©"
      },
      {
        title: "Infrastructure on Kubernetes",
        description: "Set up and managed RabbitMQ, Elasticsearch, and Grafana on Kubernetes for monitoring AI analysis throughput and latency.",
        metric: "K8s deployment",
        icon: "‚éà"
      }
    ],
    technologies: ["Python Flask", "RabbitMQ", "Elasticsearch", "Grafana", "GitLab CI", "Kubernetes", "Ollama", "VS Code API"]
  },
  {
    company: "P.I. Works",
    role: "Part-Time Junior DevOps Engineer",
    period: "October 2023 - March 2025",
    location: "Istanbul, Turkey (Remote)",
    type: "past",
    highlights: [
      {
        title: "CI/CD Pipeline Engineering",
        description: "Maintained and improved GitLab CI/CD pipelines for microservices. Integrated cspell for automated quality gates and scripted documentation generation.",
        metric: "Pipeline automation",
        icon: "üöÄ"
      },
      {
        title: "Linux System Administration",
        description: "Administered Production and Development Linux systems. Performed kernel updates, performance tuning, and security hardening.",
        metric: "System admin",
        icon: "üêß"
      },
      {
        title: "Monitoring & Observability",
        description: "Architected monitoring solutions using Prometheus, Grafana, and ELK Stack. Created custom dashboards and implemented log rotation policies within Kubernetes.",
        metric: "Full observability",
        icon: "üìä"
      },
      {
        title: "RAG-Based DevOps Agent",
        description: "Developed Retrieval-Augmented Generation agent using vector embeddings and semantic search to streamline internal issue resolution.",
        metric: "Semantic search",
        icon: "üß†"
      },
      {
        title: "Database & Dependency Management",
        description: "Conducted automated dependency audits (version/license tracking) for PostgreSQL databases, integrated directly into CI pipelines.",
        metric: "Package auditing",
        icon: "üì¶"
      }
    ],
    technologies: ["GitLab CI", "Prometheus", "Grafana", "ELK Stack", "Python", "Bash", "PostgreSQL", "Linux", "cspell"]
  },
  {
    company: "P.I. Works",
    role: "DevOps Intern",
    period: "July 2023 - October 2023",
    location: "Istanbul, Turkey (Remote)",
    type: "past",
    highlights: [
      {
        title: "CI/CD Improvements",
        description: "Contributed to GitLab CI/CD improvements and implemented Microsoft Teams notifications for pipeline statuses.",
        metric: "Pipeline notifications",
        icon: "üîî"
      },
      {
        title: "Automation Scripts",
        description: "Automated dependency audits using Bash scripts, gaining foundational experience in DevOps workflows and Linux environments.",
        metric: "Bash scripting",
        icon: "üéØ"
      }
    ],
    technologies: ["GitLab CI", "Bash", "Teams API", "Linux"]
  }
];
---

<section id="experience" class="py-20 px-4 sm:px-6 lg:px-8">
  <div class="max-w-6xl mx-auto">
    <!-- Section Header -->
    <div class="text-center mb-16">
      <span class="inline-block px-4 py-1.5 rounded-full bg-accent-secondary/10 text-accent-secondary text-sm font-medium mb-4">
        Career Journey
      </span>
      <h2 class="text-3xl sm:text-4xl font-bold text-surface-950 mb-4">
        Work Experience
      </h2>
      <p class="text-surface-700 max-w-2xl mx-auto">
        Building infrastructure and developer platforms at scale
      </p>
    </div>

    <!-- Timeline -->
    <div class="relative">
      {/* Timeline Line */}
      <div class="absolute left-0 md:left-1/2 top-0 bottom-0 w-px bg-gradient-to-b from-accent-primary via-accent-secondary to-surface-400 transform md:-translate-x-1/2 hidden md:block"></div>

      {experiences.map((exp, idx) => (
        <div 
          class={`relative mb-12 last:mb-0 md:mb-16 opacity-0 animate-slide-up`}
          style={`animation-delay: ${idx * 0.15}s`}
        >
          <div class={`md:flex items-start gap-8 ${idx % 2 === 0 ? 'md:flex-row-reverse' : ''}`}>
            {/* Timeline Dot */}
            <div class="hidden md:flex absolute left-1/2 transform -translate-x-1/2 w-4 h-4 rounded-full bg-accent-primary border-4 border-surface-100 z-10"></div>

            {/* Date Badge (Center) */}
            <div class={`hidden md:block absolute left-1/2 transform -translate-x-1/2 top-8 ${idx % 2 === 0 ? 'md:top-0 md:translate-y-0' : 'md:top-0'}`}>
              <span class={`inline-block px-3 py-1 rounded-full text-xs font-semibold ${exp.type === 'current' ? 'bg-accent-success/20 text-accent-success' : 'bg-surface-400/50 text-surface-700'}`}>
                {exp.period}
              </span>
            </div>

            {/* Content Card */}
            <div class={`md:w-[calc(50%-2rem)] ${idx % 2 === 0 ? 'md:mr-auto md:pr-8' : 'md:ml-auto md:pl-8'}`}>
              <div class="bento-card p-6">
                {/* Header */}
                <div class="flex items-start justify-between mb-4">
                  <div>
                    <div class="flex items-center gap-2 mb-1">
                      {exp.type === 'current' && (
                        <span class="relative flex h-2 w-2">
                          <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-accent-success opacity-75"></span>
                          <span class="relative inline-flex rounded-full h-2 w-2 bg-accent-success"></span>
                        </span>
                      )}
                      <h3 class="text-xl font-bold text-surface-950">{exp.company}</h3>
                    </div>
                    <p class="text-accent-primary font-semibold">{exp.role}</p>
                    <p class="text-sm text-surface-600 mt-1">{exp.location}</p>
                  </div>
                </div>

                {/* Mobile Date */}
                <div class="md:hidden mb-4">
                  <span class={`inline-block px-3 py-1 rounded-full text-xs font-semibold ${exp.type === 'current' ? 'bg-accent-success/20 text-accent-success' : 'bg-surface-400/50 text-surface-700'}`}>
                    {exp.period}
                  </span>
                </div>

                {/* Highlights */}
                <div class="space-y-3 mb-4">
                  {exp.highlights.map((highlight) => (
                    <div class="flex items-start gap-3 p-3 rounded-xl bg-surface-300/50 hover:bg-surface-300 transition-colors">
                      <span class="text-xl flex-shrink-0">{highlight.icon}</span>
                      <div class="flex-1 min-w-0">
                        <div class="flex items-center gap-2 mb-1">
                          <h4 class="font-semibold text-surface-900 text-sm">{highlight.title}</h4>
                          {highlight.metric && (
                            <span class="px-2 py-0.5 rounded-full bg-accent-primary/10 text-accent-primary text-xs font-medium">
                              {highlight.metric}
                            </span>
                          )}
                        </div>
                        <p class="text-xs text-surface-700 leading-relaxed">{highlight.description}</p>
                      </div>
                    </div>
                  ))}
                </div>

                {/* Technologies */}
                <div class="flex flex-wrap gap-1.5">
                  {exp.technologies.map((tech) => (
                    <span class="px-2 py-1 rounded-md bg-surface-400/30 text-surface-800 text-xs font-medium">
                      {tech}
                    </span>
                  ))}
                </div>
              </div>
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>
